<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
    <h1>Task Tracker</h1>
    <button onclick="location.href='/reset-tasks'">RESET TASKS</button>
    <hr>

    <% const sections = [
        {title: 'Unstarted Tasks', filter: task => task.status === 'UNSTARTED', color: 'blue'},
        {title: 'Started Tasks', filter: task => task.status === 'STARTED', color: 'orange'},
        {title: 'Completed Tasks', filter: task => task.status === 'COMPLETED', color: 'green'}
    ]; %>

    <% sections.forEach((section, index) => { %>
        <h2><%= section.title %></h2>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Status</th>
                    <th>Date Added</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% tasks.filter(task => section.filter(task) && task.class !== 'ARCHIVED').forEach(task => { %>
                    <tr>
                        <td><span style="color: <%= sections[index].color %>;"><%= task.name %></span></td>
                        <td><%= task.status %></td>
                        <td><%= task.dateAdded %></td>
                        <td>
                            <button onclick="location.href='/start-task?taskId=<%= task.id %>'">START</button>
                            <button onclick="location.href='/complete-task?taskId=<%= task.id %>'">COMPLETE</button>
                            <button onclick="location.href='/delete-task?taskId=<%= task.id %>'">DELETE</button>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    <% }) %>

    <h2>Archived Tasks</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Date Added</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% tasks.filter(task => task.class === 'ARCHIVED').forEach(task => { %>
                <tr>
                    <td><%= task.name %></td>
                    <td><%= task.status %></td>
                    <td><%= task.dateAdded %></td>
                    <td>
                        <button onclick="if (confirmDelete()) { location.href='/delete-task?taskId=<%= task.id %>' }">DELETE</button>
                        <button onclick="location.href='/readd-task?taskId=<%= task.id %>'">RE-ADD</button>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>

    <script>
        function confirmDelete() {
            return confirm('Are you sure you want to delete this task?');
        }
    </script>
</body>
</html>

